<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="sale_contract_qweb_report_rental">

        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <t t-foreach="docs" t-as="o">
                    <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})"/>
                    <div class="page">
                        <div class="oe_structure"/>
                        <div class="row" style="font-weight: bold; font-size: 20px">
                            <table class="table table-borderless">
                                <tr>
                                    <td>
                                        Rental Agreement &#160;&#160;&#160;
                                        <span t-field="o.name"/>
                                    </td>
                                    <!--                                    <td style="text-align: right">-->
                                    <!--                                        Manual Order Number &#160;&#160;&#160;-->
                                    <!--                                        <span t-field="o.manual_order_number"/>-->
                                    <!--                                    </td>-->
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px; margin: 0">
                            <table class="table table-border" style="padding: 2px; margin: 0">
                                <tr>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Start Date
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.start_date"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">End Date
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.end_date"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Del Date
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.del_date"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        PU Date
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.pu_date"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered" style="padding: 2px; margin: 0">
                                <tr>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Bill Start Date
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.bill_start_date"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Bill End Date
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.bill_end_date"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        PO Number
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.po_number"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Date Order
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.date_order"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered"
                                   style="padding: 2px; margin: 0; table-layout: fixed; width: 100%;">
                                <tr>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Customer Address
                                    </td>
                                    <td style="text-align: left; width: 35%">
                                        <t t-esc="o.partner_id.street"/>
                                        <t t-if="o.partner_id.street2">,
                                            <t t-esc="o.partner_id.street2"/>
                                        </t>
                                        <br/>
                                        <t t-if="o.partner_id.state_id">
                                            <t t-esc="o.partner_id.state_id.name"/>,
                                        </t>
                                        <t t-esc="o.partner_id.zip"/>
                                        <t t-esc="o.partner_id.city"/>
                                        <t t-esc="o.partner_id.country_id.name"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Customer ID
                                    </td>
                                    <td style="text-align: left; width: 10%">
                                        <span t-field="o.customer_id"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Contact Phone
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.contact_phone"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered"
                                   style="padding: 2px; margin: 0; table-layout: fixed; width: 100%;">
                                <tr>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Invoice Address
                                    </td>
                                    <td style="text-align: left; width: 35%">
                                        <t t-esc="o.partner_invoice_id.street"/>
                                        <t t-if="o.partner_invoice_id.street2">,
                                            <t t-esc="o.partner_invoice_id.street2"/>
                                        </t>
                                        <br/>
                                        <t t-if="o.partner_invoice_id.state_id">
                                            <t t-esc="o.partner_invoice_id.state_id.name"/>,
                                        </t>
                                        <t t-esc="o.partner_invoice_id.zip"/>
                                        <t t-esc="o.partner_invoice_id.city"/>
                                        <t t-esc="o.partner_invoice_id.country_id.name"/>
                                    </td>


                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Sage Invoice Number
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.sage_inv"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Invoice Notes
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.invoice_notes"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered"
                                   style="padding: 2px; margin: 0; table-layout: fixed; width: 100%;">
                                <tr>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Customer Email
                                    </td>
                                    <td style="text-align: left; width: 35%">
                                        <span t-field="o.contact_email"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Del Number
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.del_numbers"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Invoice Phone
                                    </td>
                                    <td style="text-align: left; width: 10%">
                                        <span t-field="o.partner_invoice_id_phone"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered"
                                   style="padding: 2px; margin: 0; table-layout: fixed; width: 100%;">
                                <tr>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Invoice Email
                                    </td>
                                    <td style="text-align: left; width: 35%">
                                        <span t-field="o.partner_invoice_id_email"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Goformz Status
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.goformz_status"/>
                                    </td>

                                    <!--                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">-->
                                    <!--                                        Agreement Recieved-->
                                    <!--                                    </td>-->
                                    <!--                                    <td style="text-align: center; width: 10%">-->
                                    <!--                                        <span t-field="o.agreement_received"/>-->
                                    <!--                                    </td>-->

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Warehouse ID
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.warehouse_id.name"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered" style="padding: 2px; margin: 0">
                                <tr>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Customer Note
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.customer_note"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Delivery Note
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.delivery_note"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Site Note
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.site_note"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Delivery Address Type
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.address_type_delivery"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered"
                                   style="padding: 2px; margin: 0; table-layout: fixed; width: 100%;">
                                <tr>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Delivery Address
                                    </td>
                                    <td style="text-align: left; width: 35%">
                                        <t t-esc="o.partner_shipping_id.street"/>
                                        <t t-if="o.partner_shipping_id.street2">,
                                            <t t-esc="o.partner_shipping_id.street2"/>
                                        </t>
                                        <br/>
                                        <t t-if="o.partner_shipping_id.state_id">
                                            <t t-esc="o.partner_shipping_id.state_id.name"/>,
                                        </t>
                                        <t t-esc="o.partner_shipping_id.zip"/>
                                        <t t-esc="o.partner_shipping_id.city"/>
                                        <t t-esc="o.partner_shipping_id.country_id.name"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Door
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.door"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Plug
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.plug"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered"
                                   style="padding: 2px; margin: 0; table-layout: fixed; width: 100%;">
                                <tr>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Shipping Email
                                    </td>
                                    <td style="text-align: left; width: 35%">
                                        <span t-field="o.partner_shipping_id_email"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Shipping Phone
                                    </td>
                                    <td style="text-align: left; width: 10%">
                                        <span t-field="o.partner_shipping_id_phone"/>
                                    </td>


                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Fuel Surcharge
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.fuel_surcharge"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered" style="padding: 2px; margin: 0">
                                <tr>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Total Quantity
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.quantity_total"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Date Paid
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.date_paid"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Miles
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.miles"/>
                                    </td>
                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Fuel SC Amount
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.fuel_sc_amount"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered" style="padding: 2px; margin: 0">
                                <tr>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Fuel
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.fuel"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Driver Pay
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.driver_pay"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Minimum Rental Period
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.min_rental_period"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Expenses
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.expenses"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row" style="font-size: 12px;  margin: 0">
                            <table class="table table-bordered" style="padding: 2px; margin: 0">
                                <tr>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Net
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.net"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Rental Bill Frequency
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.payment_term_id"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Fuel Cost
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.fuel_cost"/>
                                    </td>

                                    <td style="text-align: center; width: 15%; background-color: lightgrey;">
                                        Purchase Price
                                    </td>
                                    <td style="text-align: center; width: 10%">
                                        <span t-field="o.purchase_price"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="oe_structure"/>
                        <table class="table table-sm o_main_table table-bordered mt-4">
                            <thead style="display: table-row-group; font-size: 14px; font-weight: bold; background-color: lightgrey;">
                                <tr style="border-bottom: 1px solid black;">
                                    <th name="th_sequence" class="text-start">Seq.</th>
                                    <th name="th_pro" class="text-start">Product</th>
                                    <th name="th_description" class="text-start">Description</th>
                                    <th name="th_uom" class="text-center">Serial Number</th>
                                    <th name="th_quantity" class="text-center">Quantity</th>
                                    <th name="th_priceunit" class="text-end">Cost</th>
                                    <th name="th_taxes" class="text-end">Taxes</th>
                                    <th name="th_subtotal" class="text-end">
                                        <span>Subtotal</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="sale_tbody" style="font-size:12px">
                                <t t-set="item_count" t-value="1"/>
                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="total_taxes" t-value="0"/>
                                <t t-set="total_amount" t-value="0"/>

                                <t t-foreach="o.order_line" t-as="line">
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"/>
                                    <t t-set="total_taxes"
                                       t-value="total_taxes + sum(line.tax_id.mapped('amount')) * line.price_subtotal / 100"/>
                                    <t t-set="total_amount" t-value="total_amount + line.price_total"/>
                                    <tr t-att-class="'bg-200 fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''"
                                        style="border-bottom: 1px solid black;">
                                        <t t-if="not line.display_type">
                                            <td name="item_count" class="text-center">
                                                <span t-esc="item_count"/>
                                                <t t-set="item_count" t-value="item_count + 1"/>
                                            </td>
                                            <td name="td_name">
                                                <span t-field="line.product_id"/>
                                            </td>
                                            <td name="td_name">
                                                <span t-field="line.name"/>
                                            </td>
                                            <td name="td_serial" class="text-center">
                                                <span t-field="line.serial_no"/>
                                            </td>
                                            <td name="td_quantity" class="text-center">
                                                <span t-field="line.product_uom_qty"/>
                                            </td>
                                            <td name="td_priceunit" class="text-end">
                                                <span t-field="line.price_unit"/>
                                            </td>
                                            <td name="td_taxes" class="text-end">
                                                <span t-out="', '.join(map(lambda x: (x.description or x.name), line.tax_id))"/>
                                            </td>
                                            <td t-if="not line.is_downpayment" name="td_subtotal"
                                                class="text-end o_price_total">
                                                <span t-field="line.price_subtotal"/>
                                            </td>
                                        </t>
                                        <t t-elif="line.display_type == 'line_section'">
                                            <td name="td_section_line" colspan="99">
                                                <span t-field="line.name"/>
                                            </td>
                                        </t>
                                        <t t-elif="line.display_type == 'line_note'">
                                            <td name="td_note_line" colspan="99">
                                                <span t-field="line.name"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>

                                <!-- Row for displaying total tax and total amount -->
                                <tr style="border-top: 2px solid black; background-color: lightgrey; ">
                                    <td colspan="4" class="text-center" style="background-color: lightgrey;">
                                        <strong>Total Tax</strong>
                                    </td>
                                    <td colspan="4" class="text-center">
                                        <span t-esc="total_taxes"
                                              t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4" class="text-center"
                                        style="background-color: lightgrey; font-size: 14px">
                                        <strong>Total Amount</strong>
                                    </td>
                                    <td colspan="4" class="text-center" style="background-color: lightgrey;">
                                        <span t-esc="total_amount"
                                              t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
    <!--    <data>-->
    <!--        <report-->
    <!--                id="action_report_rental_order"-->
    <!--                string="Order"-->
    <!--                model="sale.order"-->
    <!--                report_type="qweb-pdf"-->
    <!--                file="gt_rental_management.sale_contract_qweb_report_rental"-->
    <!--                name="gt_rental_management.sale_contract_qweb_report_rental"-->
    <!--                print_report_name="(object.state in ('draft', 'sent') and 'Quotation - %s' % (object.name)) or 'Order - %s' % (object.name)"-->
    <!--        />-->
    <!--    </data>-->

</odoo>